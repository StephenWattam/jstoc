function generateTOC(e,t){function l(e){var t=[e];var n=Array.prototype.slice.call(e.children);for(var r=0;r<n.length;r++)t=t.concat(l(n[r]));return t}var n=[1,4],r=[1,4],i=false,s=true,o=/^h([1-6])$/i,u=[0,0,0,0,0,0],a="ul",f="section";n[0]--;n[1]--;r[0]--;r[1]--;e=e.appendChild(document.createElement(a));if(!t)t=document.body;var c=l(t);for(var h=0;h<c.length;h++){var p=c[h];if(m=p.nodeName.match(o)){lv=m[1]-1;u[lv]++;var d=u[n[0]];for(var v=n[0]+1;v<=lv;v++)d+="."+u[v];if(lv>=n[0]&&lv<=n[1]){for(v=lv+1;v<u.length;v++)u[v]=0;var g=e;for(v=0;v<(lv-n[0])*2-1;v++)if(g.lastChild)g=g.lastChild;if(u[lv]==1&&lv>n[0])g.appendChild(document.createElement(a));var y=document.createElement("a");y.setAttribute("href","#"+f+d);y.innerHTML=(s?d+". ":"")+p.innerHTML;if(lv-n[0]>0)g=g.lastChild;g.appendChild(document.createElement("li")).appendChild(y)}if(i&&lv>=r[0]&&lv<=r[1])p.insertBefore(document.createTextNode(d+". "),p.firstChild);p.id=f+d}}}
